@page "/login"
@using Budgeting.Web.App.Models.LoginViews;
@using Budgeting.Web.App.Services.Foundations;
@using Budgeting.Web.App.Views.Bases
@using Microsoft.AspNetCore.Authorization;
@using Budgeting.Web.App.Services.Foundations.Identity;
@using System.ComponentModel.DataAnnotations;

@attribute [AllowAnonymous]

<br />
<MudPaper Class="mx-auto pa-6" Style="width:50%;">

    <MudText Align="Align.Center" Typo="Typo.h4">LOG IN</MudText>

    <EditForm Model=@loginModel>

        <TextBoxBase 
            @ref=@EmailTextBox
            HelperText="Enter mail"
            @bind-Value="@loginModel.Email"
            Label="Email"
            ValidationAttribute=@(new EmailAddressAttribute() {ErrorMessage ="Email address is invalid!"})
            IsRequired=@true
            RequiredError="Mail is requierd."
            Immediate=@true
            Variant=Variant.Text />
                
            <br />

        <TextBoxBase
            @ref=@PasswordTextBox
            HelperText="Enter password"
            @bind-Value=@loginModel.Password
            Label="Password"
            ValidationAttribute=@(new MinLengthAttribute(8) {ErrorMessage = "Password must be at least 8 charachters long!"})
            IsRequired=@true
            RequiredError="Password is required!"
            Variant=@Variant.Text
            Immediate=@true
            InputType=@InputType.Password/>
       
        <MudCardActions>

           <ButtonBase 
               @ref=@SubmitButton
               ButtonType="ButtonType.Submit"
               Label="SUBMIT"
               OnClick=@LoginUserAsync
               Color="Color.Dark"
               Variant=@Variant.Filled
               Class="ml-auto" />


        </MudCardActions>

    </EditForm>

</MudPaper>
